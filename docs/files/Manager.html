<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ShSo\Net\Gearman</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="../css/template.css" type="text/css"></link><script type="text/javascript" src="../js/jquery-1.4.2.min.js"></script><script type="text/javascript" src="../js/jquery.tools.min.js"></script><script type="text/javascript" src="../js/jquery-ui-1.8.2.custom.min.js"></script><script type="text/javascript" src="../js/template.js"></script></head><body><div id="content"><h1 class="file">Manager.php<a href="../source/Manager.php.html"><img src="../images/icons/view_source.png" alt="View Source" border="0"></img></a></h1><div id="file-nav-box"><div id="file-nav-options">
              Show:
              <img src="../images/icons/visibility_public.png" alt="Public" id="show-public"></img><img src="../images/icons/visibility_protected.png" alt="Protected" id="show-protected"></img><img src="../images/icons/visibility_private.png" alt="Private" id="show-private"></img><span class="attribute" id="show-inherited">inherited</span></div><div id="file-nav-container"><ul id="file-nav"><li><a href="#classes"><img src="../images/icons/class.png" alt="Class" height="14"></img>
                          Classes
                      </a><ul><li><a href="#\ShSo\Net\Gearman\Manager">\ShSo\Net\Gearman\Manager</a></li></ul></li></ul><div style="clear: left;"></div></div><div id="file-nav-tab">
              Table of Contents
          </div></div><a name="top" class="anchor"></a><div id="file-description"><div xmlns:php="http://php.net/xsl" class="short-description">Interface for Danga's Gearman job scheduling system</div><div xmlns:php="http://php.net/xsl" class="long-description"><p>PHP version 5.1.0+</p>
<p>LICENSE: This source file is subject to the New BSD license that is
available through the world-wide-web at the following URI:
<a href="http://www.opensource.org/licenses/bsd-license.php">http://www.opensource.org/licenses/bsd-license.php</a>. If you did not receive
a copy of the New BSD License and are unable to obtain it through the web,
please send a note to license@php.net so we can mail you a copy immediately.</p></div></div><dl class="file-info"><dt xmlns:php="http://php.net/xsl">Author</dt><dd xmlns:php="http://php.net/xsl"><a href="mailto:joe@joestump.net">Joe Stump</a>
         
    </dd><dt xmlns:php="http://php.net/xsl">Category</dt><dd xmlns:php="http://php.net/xsl">Net
         
    </dd><dt xmlns:php="http://php.net/xsl">Copyright</dt><dd xmlns:php="http://php.net/xsl">2007-2008 Digg.com, Inc.
         
    </dd><dt xmlns:php="http://php.net/xsl">License</dt><dd xmlns:php="http://php.net/xsl"><a href="http://www.opensource.org/licenses/bsd-license.php">New BSD License</a>
         
    </dd><dt xmlns:php="http://php.net/xsl">Link</dt><dd xmlns:php="http://php.net/xsl"><a href="http://pear.php.net/package/Net_Gearman">http://pear.php.net/package/Net_Gearman</a>
         
    </dd><dt xmlns:php="http://php.net/xsl">Link</dt><dd xmlns:php="http://php.net/xsl"><a href="http://www.danga.com/gearman/">http://www.danga.com/gearman/</a>
         
    </dd><dt xmlns:php="http://php.net/xsl">Package</dt><dd xmlns:php="http://php.net/xsl">ShSo\Net\Gearman
         
    </dd><dt xmlns:php="http://php.net/xsl">Version</dt><dd xmlns:php="http://php.net/xsl">CVS: $Id$
         
    </dd></dl><a name="classes" class="anchor"></a><a id="\ShSo\Net\Gearman\Manager" class="anchor"></a><h2 class="class">\ShSo\Net\Gearman\Manager<div class="to-top"><a href="#top">jump to top</a></div></h2><div class="class"><div class="description"></div><small class="package"><b>Package: </b>ShSo\Net\Gearman</small><div xmlns:php="http://php.net/xsl" class="short-description">A client for managing Gearmand servers</div><div xmlns:php="http://php.net/xsl" class="long-description"><p>This class implements the administrative text protocol used by Gearman to do
a number of administrative tasks such as collecting stats on workers, the
queue, shutting down the server, version, etc.</p></div><dl class="class-info"><dt xmlns:php="http://php.net/xsl">Author</dt><dd xmlns:php="http://php.net/xsl"><a href="mailto:joe@joestump.net">Joe Stump</a>
         
    </dd><dt xmlns:php="http://php.net/xsl">Category</dt><dd xmlns:php="http://php.net/xsl">Net
         
    </dd><dt xmlns:php="http://php.net/xsl">Copyright</dt><dd xmlns:php="http://php.net/xsl">2007-2008 Digg.com, Inc.
         
    </dd><dt xmlns:php="http://php.net/xsl">License</dt><dd xmlns:php="http://php.net/xsl"><a href="http://www.opensource.org/licenses/bsd-license.php">New BSD License</a>
         
    </dd><dt xmlns:php="http://php.net/xsl">Link</dt><dd xmlns:php="http://php.net/xsl"><a href="http://www.danga.com/gearman/">http://www.danga.com/gearman/</a>
         
    </dd><dt xmlns:php="http://php.net/xsl">Version</dt><dd xmlns:php="http://php.net/xsl">Release: @package_version@
         
    </dd></dl><h3>Properties</h3><div><a id="\ShSo\Net\Gearman\Manager::$conn" class="anchor"></a><div class="property protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img>resource <span class="highlight">$conn</span> = null</code><div class="description"><div xmlns:php="http://php.net/xsl" class="short-description">Connection resource</div></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Default value</strong><code>null</code><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>resource</dd><dt xmlns:php="http://php.net/xsl">See</dt><dd xmlns:php="http://php.net/xsl"><a href="../files/
                         \ShSo\Net\Gearman\ShSo\Net\Gearman\Manager::sendCommand()"></a>
         
    </dd><dt xmlns:php="http://php.net/xsl">See</dt><dd xmlns:php="http://php.net/xsl"><a href="../files/
                         \ShSo\Net\Gearman\ShSo\Net\Gearman\Manager::recvCommand()"></a>
         
    </dd></dl></div><div class="clear"></div></div><a id="\ShSo\Net\Gearman\Manager::$shutdown" class="anchor"></a><div class="property protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img>boolean <span class="highlight">$shutdown</span> = false</code><div class="description"><div xmlns:php="http://php.net/xsl" class="short-description">The server is shutdown</div></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"><p>We obviously can't send more commands to a server after it's been shut
down. This is set to true in ShSo\Net\Gearman\Manager::shutdown() and then
checked in ShSo\Net\Gearman\Manager::sendCommand().</p></div><strong>Default value</strong><code>false</code><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>boolean</dd></dl></div><div class="clear"></div></div></div><h3>Methods</h3><div><a id="\ShSo\Net\Gearman\Manager::__construct()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">__construct</span><span class="nb-faded-text">(string $server, integer $timeout = 5)</span> : void</code><div class="description"><p class="short_description">Constructor</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$server</th><td>string</td><td><em><p>Host and port (e.g. 'localhost:7003')</p></em></td></tr><tr><th>$timeout</th><td>integer</td><td><em><p>Connection timeout</p></em></td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr xmlns:php="http://php.net/xsl"><td>\ShSo\Net\Gearman\ShSo\Net\Gearman\Exception</td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt xmlns:php="http://php.net/xsl">See</dt><dd xmlns:php="http://php.net/xsl"><a href="../files/
                         \ShSo\Net\Gearman\ShSo\Net\Gearman\Manager::$conn"></a>
         
    </dd></dl></div><div class="clear"></div></div><a id="\ShSo\Net\Gearman\Manager::__destruct()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">__destruct</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description">Destructor</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div></div><div class="clear"></div></div><a id="\ShSo\Net\Gearman\Manager::checkForError()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">checkForError</span><span class="nb-faded-text">(string $data)</span> : void</code><div class="description"><p class="short_description">Check for an error</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"><p>Gearman returns errors in the format of 'ERR code_here Message+here'.
This method checks returned values from the server for this error format
and will throw the appropriate exception.</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$data</th><td>string</td><td><em><p>The returned data to check for an error</p></em></td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr xmlns:php="http://php.net/xsl"><td>\ShSo\Net\Gearman\ShSo\Net\Gearman\Exception</td><td><em></em></td></tr></table></div><div class="clear"></div></div><a id="\ShSo\Net\Gearman\Manager::disconnect()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">disconnect</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description">Disconnect from server</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Details</strong><dl class="function-info"><dt xmlns:php="http://php.net/xsl">See</dt><dd xmlns:php="http://php.net/xsl"><a href="../files/
                         \ShSo\Net\Gearman\ShSo\Net\Gearman\Manager::$conn"></a>
         
    </dd></dl></div><div class="clear"></div></div><a id="\ShSo\Net\Gearman\Manager::recvCommand()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">recvCommand</span><span class="nb-faded-text">()</span> : string</code><div class="description"><p class="short_description">Receive a response</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"><p>For most commands Gearman returns a bunch of lines and ends the
transmission of data with a single line of &quot;.\n&quot;. This command reads
in everything until &quot;.\n&quot;. If the command being sent is NOT ended with
&quot;.\n&quot; DO NOT use this command.</p></div><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td></td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr xmlns:php="http://php.net/xsl"><td>\ShSo\Net\Gearman\ShSo\Net\Gearman\Exception</td><td><em></em></td></tr></table></div><div class="clear"></div></div><a id="\ShSo\Net\Gearman\Manager::sendCommand()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">sendCommand</span><span class="nb-faded-text">(string $cmd)</span> : void</code><div class="description"><p class="short_description">Send a command</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$cmd</th><td>string</td><td><em><p>The command to send</p></em></td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr xmlns:php="http://php.net/xsl"><td>\ShSo\Net\Gearman\ShSo\Net\Gearman\Exception</td><td><em></em></td></tr></table></div><div class="clear"></div></div><a id="\ShSo\Net\Gearman\Manager::setMaxQueueSize()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">setMaxQueueSize</span><span class="nb-faded-text">(string $function, integer $size)</span> : boolean</code><div class="description"><p class="short_description">Set maximum queue size for a function</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"><p>For a given function of job, the maximum queue size is adjusted to be
max_queue_size jobs long. A negative value indicates unlimited queue
size.</p>
<p>If the max_queue_size value is not supplied then it is unset (and the
default maximum queue size will apply to this function).</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$function</th><td>string</td><td><em><p>Name of function to set queue size for</p></em></td></tr><tr><th>$size</th><td>integer</td><td><em><p>New size of queue</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>boolean</td><td></td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr xmlns:php="http://php.net/xsl"><td>\ShSo\Net\Gearman\ShSo\Net\Gearman\Exception</td><td><em></em></td></tr></table></div><div class="clear"></div></div><a id="\ShSo\Net\Gearman\Manager::shutdown()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">shutdown</span><span class="nb-faded-text">(boolean $graceful = false)</span> : boolean</code><div class="description"><p class="short_description">Shut down Gearman</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$graceful</th><td>boolean</td><td><em><p>Whether it should be a graceful shutdown</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>boolean</td><td></td></tr></table><strong>Details</strong><dl class="function-info"><dt xmlns:php="http://php.net/xsl">See</dt><dd xmlns:php="http://php.net/xsl"><a href="../files/
                         \ShSo\Net\Gearman\ShSo\Net\Gearman\Manager::sendCommand()"></a>
         
    </dd><dt xmlns:php="http://php.net/xsl">See</dt><dd xmlns:php="http://php.net/xsl"><a href="../files/
                         \ShSo\Net\Gearman\ShSo\Net\Gearman\Manager::checkForError()"></a>
         
    </dd><dt xmlns:php="http://php.net/xsl">See</dt><dd xmlns:php="http://php.net/xsl"><a href="../files/
                         \ShSo\Net\Gearman\ShSo\Net\Gearman\Manager::$shutdown"></a>
         
    </dd></dl></div><div class="clear"></div></div><a id="\ShSo\Net\Gearman\Manager::status()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">status</span><span class="nb-faded-text">()</span> : array</code><div class="description"><p class="short_description">Get queue/worker status by function</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"><p>This function queries for queue status. The array returned is keyed by
the function (job) name and has how many jobs are in the queue, how
many jobs are running and how many workers are capable of performing
that job.</p></div><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>array</td><td>An array keyed by function name</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr xmlns:php="http://php.net/xsl"><td>\ShSo\Net\Gearman\ShSo\Net\Gearman\Exception</td><td><em></em></td></tr></table></div><div class="clear"></div></div><a id="\ShSo\Net\Gearman\Manager::version()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">version</span><span class="nb-faded-text">()</span> : string</code><div class="description"><p class="short_description">Get the version of Gearman running</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td></td></tr></table><strong>Details</strong><dl class="function-info"><dt xmlns:php="http://php.net/xsl">See</dt><dd xmlns:php="http://php.net/xsl"><a href="../files/
                         \ShSo\Net\Gearman\ShSo\Net\Gearman\Manager::sendCommand()"></a>
         
    </dd><dt xmlns:php="http://php.net/xsl">See</dt><dd xmlns:php="http://php.net/xsl"><a href="../files/
                         \ShSo\Net\Gearman\ShSo\Net\Gearman\Manager::checkForError()"></a>
         
    </dd></dl></div><div class="clear"></div></div><a id="\ShSo\Net\Gearman\Manager::workers()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">workers</span><span class="nb-faded-text">()</span> : array</code><div class="description"><p class="short_description">Get worker status and info</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"><p>Returns the file descriptor, IP address, client ID and the abilities
that the worker has announced.</p></div><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>array</td><td>A list of workers connected to the server</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr xmlns:php="http://php.net/xsl"><td>\ShSo\Net\Gearman\ShSo\Net\Gearman\Exception</td><td><em></em></td></tr></table></div><div class="clear"></div></div></div></div></div><small class="footer">
            Documentation was generated by
            <a href="http://phpdoc.org">phpDocumentor
                2.8.5</a>.
        </small></body></html>
